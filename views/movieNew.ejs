<!DOCTYPE html>
<html>

<head>
    <title>UdeSA Movies</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">UdeSA Movies</h1>
        <p class="text-center">Welcome to UdeSA Movies</p>
        <div class="d-flex justify-content-center mb-4">
            <a href="/movies/new" class="btn btn-primary mx-2">Estrenos</a>
            <a href="/movies/recomended" class="btn btn-primary mx-2">Recomendadas</a>
        </div>

        <h2 class="text-center mb-4">Nueva Película</h2>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form action="/movies/store" method="POST" class="border p-4 shadow-sm rounded">
                    <div class="mb-3">
                        <label for="title" class="form-label">Título</label>
                        <!-- en el value del input preguntamos si existe oldData en locals, y si coincide con el name del input, si lo hace, asignar el valor a value, sino value quedara vacio  -->
                        <input type="text" class="form-control" id="title" name="title" placeholder="Título" value="<%= locals.oldData && oldData.title ? oldData.title : null  %>">
                        <!-- aqui preguntamos si hay errores en locals, y si el error coincide con el name del input. si hay enviamos el error en un div con class="error-msg" -->
                        <% if (locals.errors && errors.title) { %>
                            <div class="error-msg"><%= errors.title.msg %></div>
                        <% } %>
                    </div>
                    <div class="mb-3">
                        <label for="rating" class="form-label">Rating</label>
                        <!-- en el value del input preguntamos si existe oldData en locals, y si coincide con el name del input, si lo hace, asignar el valor a value, sino value quedara vacio  -->
                        <input type="number" class="form-control" id="rating" name="rating" placeholder="Rating" value="<%= locals.oldData && oldData.rating ? oldData.rating : null  %>">
                        <!-- aqui preguntamos si hay errores en locals, y si el error coincide con el name del input. si hay enviamos el error en un div con class="error-msg" -->
                        <% if (locals.errors && errors.rating) { %>
                            <div class="error-msg"><%= errors.rating.msg %></div>
                        <% } %>
                    </div>
                    <div class="mb-3">
                        <label for="awards" class="form-label">Premios</label>
                        <!-- en el value del input preguntamos si existe oldData en locals, y si coincide con el name del input, si lo hace, asignar el valor a value, sino value quedara vacio  -->
                        <input type="number" class="form-control" id="awards" name="awards" placeholder="Premios" value="<%= locals.oldData && oldData.awards ? oldData.awards : null  %>">
                        <!-- aqui preguntamos si hay errores en locals, y si el error coincide con el name del input. si hay enviamos el error en un div con class="error-msg" -->
                        <% if (locals.errors && errors.awards) { %>
                            <div class="error-msg"><%= errors.awards.msg %></div>
                        <% } %>
                    </div>
                    <div class="mb-3">
                        <label for="release_date" class="form-label">Fecha de Estreno</label>
                        <!-- en el value del input preguntamos si existe oldData en locals, y si coincide con el name del input, si lo hace, asignar el valor a value, sino value quedara vacio  -->
                        <input type="date" class="form-control" id="release_date" name="release_date" value="<%= locals.oldData && oldData.release_date ? oldData.release_date : null  %>">
                        <!-- aqui preguntamos si hay errores en locals, y si el error coincide con el name del input. si hay enviamos el error en un div con class="error-msg" -->
                        <% if (locals.errors && errors.release_date) { %>
                            <div class="error-msg"><%= errors.release_date.msg %></div>
                        <% } %>
                    </div>
                    <div class="mb-3">
                        <label for="length" class="form-label">Duración</label>
                        <!-- en el value del input preguntamos si existe oldData en locals, y si coincide con el name del input, si lo hace, asignar el valor a value, sino value quedara vacio  -->
                        <input type="number" class="form-control" id="length" name="length" placeholder="Duración (minutos)" value="<%= locals.oldData && oldData.length ? oldData.length : null  %>">
                        <!-- aqui preguntamos si hay errores en locals, y si el error coincide con el name del input. si hay enviamos el error en un div con class="error-msg" -->
                        <% if (locals.errors && errors.length) { %>
                            <div class="error-msg"><%= errors.length.msg %></div>
                        <% } %>            
                    </div>
                    <div class="mb-3">
                        <label for="genre_id" class="form-label">Género</label>
                        <select class="form-select" id="genre_id" name="genre_id">
                            <% for(let i = 0; i < genres.length; i++){ %>
                                <option value="<%= genres[i].id %>"><%= genres[i].name %></option>
                            <% } %>
                        </select>
                        
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Guardar</button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

</html>

